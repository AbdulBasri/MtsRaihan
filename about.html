<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Makaan - Real Estate HTML Template</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs5/jqc-1.12.4/dt-1.13.1/datatables.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.3.1/css/fixedHeader.bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.4.0/css/responsive.bootstrap.min.css">
   
    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar Start -->
        <div class="container-fluid nav-bar bg-transparent">
            <nav class="navbar navbar-expand-lg bg-white navbar-light py-0 px-4">
                <a href="index.html" class="navbar-brand d-flex align-items-center text-center">
                    <div class="icon p-2 me-2">
                        <img class="img-fluid" src="img/icon-deal.png" alt="Icon" style="width: 30px; height: 30px;">
                    </div>
                    <h1 class="m-0 text-primary">Makaan</h1>
                </a>
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                        <a href="index.html" class="nav-item nav-link">Home</a>
                        <a href="about.html" class="nav-item nav-link active">About</a>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Property</a>
                            <div class="dropdown-menu rounded-0 m-0">
                                <a href="property-list.html" class="dropdown-item">Property List</a>
                                <a href="property-type.html" class="dropdown-item">Property Type</a>
                                <a href="property-agent.html" class="dropdown-item">Property Agent</a>
                            </div>
                        </div>
                        <div class="nav-item dropdown">
                            <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Pages</a>
                            <div class="dropdown-menu rounded-0 m-0">
                                <a href="testimonial.html" class="dropdown-item">Testimonial</a>
                                <a href="404.html" class="dropdown-item">404 Error</a>
                            </div>
                        </div>
                        <a href="contact.html" class="nav-item nav-link">Contact</a>
                    </div>
                    <a href="" class="btn btn-primary px-3 d-none d-lg-flex">Add Property</a>
                </div>
            </nav>
        </div>
        <!-- Navbar End -->

        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                
                <!-- Button trigger modal -->
                <button type="button" class="btn btn-success" id="tambahProduk">
                    + Tambah Santri
                  </button>
                <br>
                <br>
                <table
                    id="gogo"
                    class="table table-striped table-bordered mt-2 mb-2"
                    style="width: 100%"
                ></table>
                <br />
                <br />
            </div>
        </div>
    </div>
   <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">            
                <!-- Modal Header -->
                <div class="modal-header">
                <h4 class="modal-title">Tambah Produk</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
        
                <!-- Modal body -->
                <div class="modal-body">
                    <form>
                        <input type="hidden" class="form-control" id="idProduk">
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Nama Lengkap</label>
                            <input type="text" class="form-control" id="namaProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">NIK</label>
                            <input type="number" class="form-control" id="nikProduk" required minlength="16" maxlength="16">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">NISN</label>
                            <input type="text" class="form-control" id="nisnproduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">No KIP</label>
                            <input type="text" class="form-control" id="nokipProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Tempat Lahir</label>
                            <input type="text" class="form-control" id="tempatlahirProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Tanggal Lahir</label>
                            <input type="date" class="form-control" id="tanggallahirProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Jenis Kelamin</label>
                            <select class="form-control" id="jeniskelaminProduk" required>
                                <option value="">Pilih Jenis Kelamin</option>
                                <option value="Laki-laki">Laki-laki</option>
                                <option value="Perempuan">Perempuan</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Alamat</label>
                            <input type="text" class="form-control" id="alamatProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">No KK</label>
                            <input type="number" class="form-control" id="nokkProduk" required minlength="16" maxlength="16">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Nama Ayah</label>
                            <input type="text" class="form-control" id="namaayahProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">NIK Ayah</label>
                            <input type="number" class="form-control" id="nikayahProduk" required minlength="16" maxlength="16">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Pekerjaan Ayah</label>
                            <input type="text" class="form-control" id="pekerjaanayahProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Nama Ibu</label>
                            <input type="text" class="form-control" id="namaibuProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">NIK Ibu</label>
                            <input type="number" class="form-control" id="nikibuProduk" required minlength="16" maxlength="16">
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Pekerjaan Ibu</label>
                            <input type="text" class="form-control" id="pekerjaanibuProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Penghasilan Ayah</label>
                            <input type="text" class="form-control" id="penghasilanayahProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Penghasilan Ibu</label>
                            <input type="text" class="form-control" id="penghasilanibuProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">Alamat Orang Tua</label>
                            <input type="text" class="form-control" id="alamatortuProduk" required>
                        </div>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">No HP Orang Tua</label>
                            <input type="number" class="form-control" id="nohportuaProduk" required minlength="10" maxlength="12">
                        </div>
                    </form>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                <button type="button" class="btn btn-success" data-bs-dismiss="modal">Simpan</button>
                </div>
        
            </div>
        </div>
    </div>
    
    <div class="modal" id="viewModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Detail Santri</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <p><strong>Nama Lengkap:</strong> <span id="viewnama"></span></p>
                    <p><strong>NIK:</strong> <span id="viewnik"></span></p>
                    <p><strong>NISN:</strong> <span id="viewnisn"></span></p>
                    <p><strong>No KIP:</strong> <span id="viewnokip"></span></p>
                    <p><strong>Tempat Lahir:</strong> <span id="viewtempatlahir"></span></p>
                    <p><strong>Tanggal Lahir:</strong> <span id="viewtanggallahir"></span></p>
                    <p><strong>Jenis Kelamin:</strong> <span id="viewjeniskelamin"></span></p>
                    <p><strong>Alamat:</strong> <span id="viewalamat"></span></p>
                    <p><strong>No KK:</strong> <span id="viewnokk"></span></p>
                    <p><strong>Nama Ayah:</strong> <span id="viewnamaayah"></span></p>
                    <p><strong>NIK Ayah:</strong> <span id="viewnikayah"></span></p>
                    <p><strong>Pekerjaan Ayah:</strong> <span id="viewpekerjaanayah"></span></p>
                    <p><strong>Nama Ibu:</strong> <span id="viewnamaibu"></span></p>
                    <p><strong>NIK Ibu:</strong> <span id="viewnikibu"></span></p>
                    <p><strong>Pekerjaan Ibu:</strong> <span id="viewpekerjaanibu"></span></p>
                    <p><strong>Penghasilan Ayah:</strong> <span id="viewpenghasilanayah"></span></p>
                    <p><strong>Penghasilan Ibu:</strong> <span id="viewpenghasilanibu"></span></p>
                    <p><strong>Alamat Orang Tua:</strong> <span id="viewalamatortu"></span></p>
                    <p><strong>No HP Orang Tua:</strong> <span id="viewnohportua"></span></p>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay">
        <img src="ZZ5H.gif" alt="Loading...">
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/bs5/jqc-1.12.4/dt-1.13.1/datatables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.3/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.3/js/dataTables.bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/fixedheader/3.3.1/js/dataTables.fixedHeader.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.4.0/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.4.0/js/responsive.bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
            const BASE_URL = "https://script.google.com/macros/s/AKfycbxMlzAQ1FUmoCEWAb9VOlYadvY37VS1hwCX5Gj4dYBmu8Ck7boYXsa9GZrjjymToO-W/exec";
            console.log(BASE_URL)
            const table = $("#gogo").DataTable({
                ajax: BASE_URL + "?action=get-product",
                order: [[0, 'asc']], // Ensure the table is sorted by the first column (ID) in ascending order
                columns: [
                    {
                    title: "No",
                    data: null,
                    render: function (data, type, row, meta) {
                    return meta.row + 1;
                     }
                    },
                    {
                    title:"ID",
                    data:"id"
                    },
                    {
                    title:"Nama Lengkap",
                    data:"nama"
                    },
                    {
                    title:"NIK",
                    data:"nik"
                    },
                    {
                    title:"NISN",
                    data:"nisn"
                    },
                    {
                    title:"NO KIP",
                    data:"nohportua"
                    },
                    {
                    title:"Edit",
                    target: -1,
                    data: null,
                    defaultContent: '<button class="btn btn-warning btn-sm" id="edit">Edit</button>'              
                 },
                 {
                    title:"Delete",
                    target: -1,
                    data: null,
                    defaultContent: '<button class="btn btn-danger btn-sm" id="delete">Delete</button>'
                },
                {
                    title:"View",
                    target: -1,
                    data: null,
                    defaultContent: '<button class="btn btn-info btn-sm" id="view">View</button>'
                }
                    
                
                ], 
            rowId: "Id",
            liveAjax: true,
            responsive: true
                          
            })

            function showLoading() {
                $('.loading-overlay').fadeIn();
            }

            function hideLoading() {
                $('.loading-overlay').fadeOut();
            }

            $('#gogo tbody').on('click', 'button#delete', function () {
                const data = table.row($(this).parents('tr')).data();
                if (confirm('Are you sure you want to delete this record?')) {
                    showLoading();
                    $.ajax({
                        url: BASE_URL + "?action=delete&id=" + data.id,
                        method: "GET",
                        success: function(response) {
                            table.ajax.reload();
                            hideLoading();
                        },
                        error: function() {
                            hideLoading();
                            alert('Failed to delete data.');
                        }
                    });
                }
            });

            $('#gogo tbody').on('click', 'button#view', function () {
                const data = table.row($(this).parents('tr')).data();
                // Populate view modal with data
                $('#viewnama').text(data.nama);
                $('#viewnik').text(data.nik);
                $('#viewnisn').text(data.nisn);
                $('#viewnokip').text(data.nokip);
                $('#viewtempatlahir').text(data.tempatlahir);
                $('#viewtanggallahir').text(data.tanggallahir);
                $('#viewjeniskelamin').text(data.jeniskelamin);
                $('#viewalamat').text(data.alamat);
                $('#viewnokk').text(data.nokk);
                $('#viewnamaayah').text(data.namaayah);
                $('#viewnikayah').text(data.nikayah);
                $('#viewpekerjaanayah').text(data.pekerjaanayah);
                $('#viewnamaibu').text(data.namaibu);
                $('#viewnikibu').text(data.nikibu);
                $('#viewpekerjaanibu').text(data.pekerjaanibu);
                $('#viewpenghasilanayah').text(data.penghasilanayah);
                $('#viewpenghasilanibu').text(data.penghasilanibu);
                $('#viewalamatortu').text(data.alamatortu);
                $('#viewnohportua').text(data.nohportua);
                // Show view modal
                $('#viewModal').modal('show');
               ;
            });

            $('#tambahProduk').on('click', () => {
                clear();
                $('#myModal').modal('show');
                $('#myModal .modal-title').text('Tambah Data Santri');
            })
            $('#gogo tbody').on('click', '#edit', function() {
                const data = table.row($(this).parents('tr')).data();
                $('#idProduk').val(data.id);
                $('#namaProduk').val(data.nama);
                $('#nikProduk').val(data.nik);
                $('#nisnproduk').val(data.nisn);
                $('#nokipProduk').val(data.nokip);
                $('#tempatlahirProduk').val(data.tempatlahir);
                $('#tanggallahirProduk').val(data.tanggallahir);
                $('#jeniskelaminProduk').val(data.jeniskelamin);
                $('#alamatProduk').val(data.alamat);
                $('#nokkProduk').val(data.nokk);
                $('#namaayahProduk').val(data.namaayah);
                $('#nikayahProduk').val(data.nikayah);
                $('#pekerjaanayahProduk').val(data.pekerjaanayah);
                $('#namaibuProduk').val(data.namaibu);
                $('#nikibuProduk').val(data.nikibu);
                $('#pekerjaanibuProduk').val(data.pekerjaanibu);
                $('#penghasilanayahProduk').val(data.penghasilanayah);
                $('#penghasilanibuProduk').val(data.penghasilanibu);
                $('#alamatortuProduk').val(data.alamatortu);
                $('#nohportuProduk').val(data.nohportu);
                $('#nohportuaProduk').val(data.nohportua);
                $('#myModal').modal('show');
                $('#myModal .modal-title').text('Edit Data Santri');
                
            })
            $('.modal-footer .btn-success').on('click', () =>{
                const namaProduk = $('#namaProduk').val();
                const nikProduk = $('#nikProduk').val();
                const nisnProduk = $('#nisnproduk').val();
                const nokipProduk = $('#nokipProduk').val();
                const tempatlahirProduk = $('#tempatlahirProduk').val();
                const tanggallahirProduk = $('#tanggallahirProduk').val();
                const jeniskelaminProduk = $('#jeniskelaminProduk').val();
                const alamatProduk = $('#alamatProduk').val();
                const nokkProduk = $('#nokkProduk').val();
                const namaayahProduk = $('#namaayahProduk').val();
                const nikayahProduk = $('#nikayahProduk').val();
                const pekerjaanayahProduk = $('#pekerjaanayahProduk').val();
                const namaibuProduk = $('#namaibuProduk').val();
                const nikibuProduk = $('#nikibuProduk').val();
                const pekerjaanibuProduk = $('#pekerjaanibuProduk').val();
                const penghasilanayahProduk = $('#penghasilanayahProduk').val();
                const penghasilanibuProduk = $('#penghasilanibuProduk').val();
                const alamatortuProduk = $('#alamatortuProduk').val();
                const nohportuaProduk = $('#nohportuaProduk').val();
                const idProduk = $('#idProduk').val();

                if (namaProduk ==''|| nikProduk ==''|| nisnProduk ==''|| nokipProduk ==''|| tempatlahirProduk ==''|| tanggallahirProduk ==''|| jeniskelaminProduk ==''|| alamatProduk ==''|| nokkProduk ==''|| namaayahProduk ==''|| nikayahProduk ==''|| pekerjaanayahProduk ==''|| penghasilanayahProduk ==''|| namaibuProduk ==''|| nikibuProduk ==''|| pekerjaanibuProduk ==''|| penghasilanibuProduk ==''|| alamatortuProduk ==''|| nohportuaProduk ==''){
                    alert('Data tidak boleh kosong')
                    return;
                }
                let apiUrl='';

                if (idProduk){
                    apiUrl=`${BASE_URL}?action=update&nama=${namaProduk}&nik=${nikProduk}&nisn=${nisnProduk}&nokip=${nokipProduk}&tempatlahir=${tempatlahirProduk}&tanggallahir=${tanggallahirProduk}&jeniskelamin=${jeniskelaminProduk}&alamat=${alamatProduk}&nokk=${nokkProduk}&namaayah=${namaayahProduk}&nikayah=${nikayahProduk}&pekerjaanayah=${pekerjaanayahProduk}&penghasilanayah=${penghasilanayahProduk}&namaibu=${namaibuProduk}&nikibu=${nikibuProduk}&pekerjaanibu=${pekerjaanibuProduk}&penghasilanibu=${penghasilanibuProduk}&alamatortu=${alamatortuProduk}&nohportua=${nohportuaProduk}&id=${idProduk}`;                       
                }
                    else {
                    apiUrl=`${BASE_URL}?action=insert&nama=${namaProduk}&nik=${nikProduk}&nisn=${nisnProduk}&nokip=${nokipProduk}&tempatlahir=${tempatlahirProduk}&tanggallahir=${tanggallahirProduk}&jeniskelamin=${jeniskelaminProduk}&alamat=${alamatProduk}&nokk=${nokkProduk}&namaayah=${namaayahProduk}&nikayah=${nikayahProduk}&pekerjaanayah=${pekerjaanayahProduk}&penghasilanayah=${penghasilanayahProduk}&namaibu=${namaibuProduk}&nikibu=${nikibuProduk}&pekerjaanibu=${pekerjaanibuProduk}&penghasilanibu=${penghasilanibuProduk}&alamatortu=${alamatortuProduk}&nohportua=${nohportuaProduk}`;      
                
                }

                showLoading();
                $.getJSON(apiUrl, function(result){
                    alert(result.message);
                    location.reload();
                    hideLoading();
                }).fail(function() {
                    hideLoading();
                    alert('Failed to save data.');
                });
            })
        })
        function clear (){
                $('#idProduk').val('');
                $('#namaProduk').val('');
                $('#nikProduk').val('');
                $('#nisnproduk').val('');
                $('#nokipProduk').val('');
                $('#tempatlahirProduk').val('');
                $('#tanggallahirProduk').val('');
                $('#jeniskelaminProduk').val('');
                $('#alamatProduk').val('');
                $('#nokkProduk').val('');
                $('#namaayahProduk').val('');
                $('#nikayahProduk').val('');
                $('#pekerjaanayahProduk').val('');
                $('#namaibuProduk').val('');
                $('#nikibuProduk').val('');
                $('#pekerjaanibuProduk').val('');
                $('#penghasilanayahProduk').val('');
                $('#penghasilanibuProduk').val('');
                $('#alamatortuProduk').val('');
                $('#nohportuProduk').val('s');
                
        }

        // Function to change logo position
        function changeLogoPosition(position) {
            const logoContainer = document.querySelector('.logo-container');
            logoContainer.className = `logo-container ${position}`;
        }

        // Event listeners for logo position buttons
        document.getElementById('logo-top-left').addEventListener('click', () => changeLogoPosition('top-left'));
        document.getElementById('logo-top-right').addEventListener('click', () => changeLogoPosition('top-right'));
        document.getElementById('logo-bottom-left').addEventListener('click', () => changeLogoPosition('bottom-left'));
        document.getElementById('logo-bottom-right').a
        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
</body>

</html>